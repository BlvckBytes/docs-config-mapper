"use strict";(self.webpackChunkdocs_config_mapper=self.webpackChunkdocs_config_mapper||[]).push([[835],{6405:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var i=s(4848),t=s(8453);const a={sidebar_position:2},r="Pre-Processor",o={id:"pre-processor",title:"Pre-Processor",description:"The pre-processor resembles very simple key/value-based substitution, used to extract localized textual content from the configuration-file, which expresses rendering behavior.",source:"@site/docs/pre-processor.md",sourceDirName:".",slug:"/pre-processor",permalink:"/docs-config-mapper/pre-processor",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"documentationSidebar",previous:{title:"Overview",permalink:"/docs-config-mapper/"},next:{title:"Configuration File",permalink:"/docs-config-mapper/configuration-file"}},l={},c=[{value:"Keys And Values",id:"keys-and-values",level:2},{value:"Variables",id:"variables",level:2},{value:"Substitution",id:"substitution",level:2},{value:"Temporary Variables",id:"temporary-variables",level:3},{value:"Migrating Local Files",id:"migrating-local-files",level:2},{value:"Discontinued Keys",id:"discontinued-keys",level:3},{value:"Absent Keys",id:"absent-keys",level:3},{value:"Existing Keys",id:"existing-keys",level:3}];function d(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"pre-processor",children:"Pre-Processor"})}),"\n",(0,i.jsx)(n.p,{children:"The pre-processor resembles very simple key/value-based substitution, used to extract localized textual content from the configuration-file, which expresses rendering behavior."}),"\n",(0,i.jsx)(n.h2,{id:"keys-and-values",children:"Keys And Values"}),"\n",(0,i.jsxs)(n.p,{children:["In order to avoid needless complexity and improve on readability, input-files do not contain any control-characters whatsoever, besides comment-markers (",(0,i.jsx)(n.code,{children:"#"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:["The key is simply identified as the first word of the line, which thereby cannot contain spaces; keys can only consist of uppercase latin characters and digits, as well as hyphens (",(0,i.jsx)(n.code,{children:"-"}),") and underscores (",(0,i.jsx)(n.code,{children:"_"}),"); use the latter to build self-descriptive names, with hyphens separating words within the same group, and underscores delimiting groups. For example, ",(0,i.jsx)(n.code,{children:"DISPLAY_PREVIOUS-PAGE_LORE_LEFT-CLICK-DESCRIPTION"})," and ",(0,i.jsx)(n.code,{children:"DISPLAY_PREVIOUS-PAGE_LORE_RIGHT-CLICK-DESCRIPTION"}),', which describe the previous-page button\'s lore-content in regards to describing what action will be carried out when either left- or right-clicking, all within a GUI called "display". Do not refrain from employing long and verbose keys, and scope groups of keys by a common prefix, as to visually depict their mutual belonging.']}),"\n",(0,i.jsxs)(n.p,{children:["After this key, any amount of white-space may follow; it is advised to align values so their beginning shares a common column, making it a lot easier to read and edit. If the first character of the value is required to be a space, prepend it by a backslash (",(0,i.jsx)(n.code,{children:"\\"}),"); if a value is required to have trailing spaces, append them by a backslash also; to have a literal backslash at either the beginning or the end of a line in combination with whitespace, prepend the backslash by another backslash, e.g. ",(0,i.jsx)(n.code,{children:"\\\\"}),". Backslashes at the beginning of a line which are not followed up by whitespace do not require escaping; similarly, backslashes at the end of a line which are not prepended by whitespace do not require escaping either."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"A-RATHER-LONG-KEY The value of the first key, without any spaces\nSHORT-KEY         \\ The value of the second key, containing one leading and two trailing spaces  \\\nTHIRD-KEY         \\\\ The value of the third key, starting and ending with literal backslashes, which are padded out by a space each \\\\\nLAST-KEY          \\The value of the last key, starting and ending with literal backslashes without spacing, thereby not requiring any escaping\\\n"})}),"\n",(0,i.jsx)(n.h2,{id:"variables",children:"Variables"}),"\n",(0,i.jsxs)(n.p,{children:["Always remember that the only objective of this file is to extract localized text, ",(0,i.jsx)(n.strong,{children:"not"})," to define appearance and behavior; thus follows, that variables are simple values on which ",(0,i.jsx)(n.em,{children:"no further operations"})," will be carried out. The names of said variables adhere to the same constraints as pre-processor keys do, with the only difference of being all lower-case, as to not confuse them with the former; there is ",(0,i.jsx)(n.strong,{children:"no"})," recursive key-substitution, by design! To request substitution, enclose variable-names in curly-brackets (",(0,i.jsx)(n.code,{children:"{...}"}),"), without any additional inside whitespace."]}),"\n",(0,i.jsxs)(n.p,{children:["For the pre-processor value to contain a literal ",(0,i.jsx)(n.code,{children:"{...}"}),", escape ",(0,i.jsx)(n.strong,{children:"only"})," the opening-bracket, e.g. ",(0,i.jsx)(n.code,{children:"\\{literal-curlies}"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The developer(s) of the software should always document existing variables for each key in a comment right above, as to help translators understand the underlying evaluation-environment. This notation is standardized, and has the format of ",(0,i.jsx)(n.code,{children:"# - <name>: <type>"}),"; by adhering to this layout, automatic migration of existing local files will also update informational variable comments."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Only consecutive comments above a key are associated with said key, thereby making it mandatory to not space variable documentations out by blank lines."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"# - owner: String\n# - loc_x: Integer\n# - loc_y: Integer\n# - loc_z: Integer\nMESSAGE_BEFORE-TELEPORTING &7Teleporting to the Shop of &e{owner} &7at &e{loc_x}&7, &e{loc_y}&7, &e{loc_z}&7.\n"})}),"\n",(0,i.jsx)(n.h2,{id:"substitution",children:"Substitution"}),"\n",(0,i.jsxs)(n.p,{children:["YAML-keys whose values contain pre-processor variables will always be turned into expression-mode by appending a trailing dollar (",(0,i.jsx)(n.code,{children:"$"}),") to their name, if not yet present, since strings are substituted as their corresponding literals, and possibly present variables need to access the evaluation-environment."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["While it is in general not advised to leave enabling expression-mode to the pre-processor and should thereby always be carried out manually, this feature can become especially dangerous on non-scalar values, namely lists; a list containing strings which are not wrapped in double-quotes (",(0,i.jsx)(n.code,{children:'"'}),") will be interpreted as variables, functions and key-words when enabling expression-mode, and are thus resulting in undesired and unexpected behavior."]})}),"\n",(0,i.jsxs)(n.p,{children:["To request substitution, simply wrap the pre-processor key in curly-brackets (",(0,i.jsx)(n.code,{children:"{...}"}),") and prepend an at-symbol (",(0,i.jsx)(n.code,{children:"@"}),"); at has been chosen instead of dollar, as to avoid conflicts with other widely-used substitution systems, as offered by - for example - Maven."]}),"\n",(0,i.jsx)(n.p,{children:"Interpolation will simply be translated to use of the concatenation-operator, as the following example portrays."}),"\n",(0,i.jsx)(n.p,{children:"Input"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"LORE_LINE   &8\u2666 &7Location: &e{loc_x}&7, &e{loc_y}&7, &e{loc_z}\nLORE_SPACER &8&m                                \\\n"})}),"\n",(0,i.jsx)(n.p,{children:"Config"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"myItem:\n  lore$:\n  - '@{LORE_SPACER}'\n  - '@{LORE_LINE}'\n  - '@{LORE_SPACER}'\n"})}),"\n",(0,i.jsx)(n.p,{children:"Result"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:'myItem:\n  lore$:\n  - \'"&8&m                                "\'\n  - \'"&8\u2666 &7Location: &e" & loc_x & "&7, &e" & loc_y & "&7, &e" & loc_z\'\n  - \'"&8&m                                "\'\n'})}),"\n",(0,i.jsx)(n.h3,{id:"temporary-variables",children:"Temporary Variables"}),"\n",(0,i.jsx)(n.p,{children:"A great example of where temporary variables make a lot of sense is data-deduplication. The pre-processor only serves as a means to localize without the need to have any scripting experience, and it thereby should not be used to circumvent the versatility of expressions; the file-global lookup table can and should be used to deduplicate reoccurring values, like a chat-message prefix."}),"\n",(0,i.jsx)(n.p,{children:"Once attached to a pre-processor key by the parentheses-syntax, the temporary variables specified therein are only available to the corresponding value:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"<PRE-PROCESSOR_KEY>(<variable_1>=<value_1>;<variable_2>=<value_2>;...)\n"})}),"\n",(0,i.jsx)(n.p,{children:"To avoid translators having to understand subscripting operators, the corresponding expression can be hidden behind a user-friendly variable-name, as presented below."}),"\n",(0,i.jsx)(n.p,{children:"Input"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"MESSAGE_PREFIX      &8[&6YourPlugin&8]\nCHAT_MESSAGE_FIRST  {prefix} &7This is the first message\nCHAT_MESSAGE_SECOND {prefix} &7This is the second message\nCHAT_MESSAGE_THIRD  {prefix} &7This is the third message\n"})}),"\n",(0,i.jsx)(n.p,{children:"Config"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"chatMessages:\n  first$: '@{CHAT_MESSAGE_FIRST(prefix=lut[\"MESSAGE_PREFIX\"])}'\n  second$: '@{CHAT_MESSAGE_SECOND(prefix=lut[\"MESSAGE_PREFIX\"])}'\n  third$: '@{CHAT_MESSAGE_THIRD(prefix=lut[\"MESSAGE_PREFIX\"])}'\n\nlut:\n  MESSAGE_PREFIX$: '@{MESSAGE_PREFIX}'\n"})}),"\n",(0,i.jsx)(n.p,{children:"Result"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:'chatMessages:\n  first$: \'lut["MESSAGE_PREFIX"] & " &7This is the first message"\'\n  second$: \'lut["MESSAGE_PREFIX"] & " &7This is the second message"\'\n  third$: \'lut["MESSAGE_PREFIX"] & " &7This is the third message"\'\n\nlut:\n  MESSAGE_PREFIX$: \'"&8[&6YourPlugin&8]"\'\n'})}),"\n",(0,i.jsx)(n.h2,{id:"migrating-local-files",children:"Migrating Local Files"}),"\n",(0,i.jsx)(n.p,{children:"Existing translation-files are, if not yet existing locally, copied from the JARs resources into the plugin-folder, for quick and easy access, as well as personalization. If a file already exists, it is not overwritten, but rather migrated to the updated version."}),"\n",(0,i.jsx)(n.h3,{id:"discontinued-keys",children:"Discontinued Keys"}),"\n",(0,i.jsx)(n.p,{children:"If a key has been discontinued and is no longer made use of by the standard configuration as provided by the plugin, its local copy will simply be ignored and remain untouched, since the user may be storing relevant information therein."}),"\n",(0,i.jsx)(n.h3,{id:"absent-keys",children:"Absent Keys"}),"\n",(0,i.jsx)(n.p,{children:"If a key has been added in a new revision of the plugin, but is still missing locally, it will be inserted closest to an existing reference-key, which either be a predecessor, or a successor. If there's no locatable reference, it will simply be added to the very bottom. With the key, all comments above it will also be copied over, as to ensure envionment variable documentation."}),"\n",(0,i.jsx)(n.h3,{id:"existing-keys",children:"Existing Keys"}),"\n",(0,i.jsxs)(n.p,{children:["If a key is already existing locally, its value will of course not be overwritten; comments above it will be scanned for environment variable documentation, and - if entries are missing - they will be added to the very bottom of this section, as to inform the user about new additions; discontinued variables ",(0,i.jsx)(n.em,{children:"will be deleted"}),", as to avoid confusion."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var i=s(6540);const t={},a=i.createContext(t);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);